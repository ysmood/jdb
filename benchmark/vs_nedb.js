// Generated by CoffeeScript 1.9.3
var Benchmark, nedb, suite;

Benchmark = require('benchmark');

suite = new Benchmark.Suite;

Benchmark.support.timeout = false;

nedb = new (require('nedb'))({
  filename: 'nedb.db',
  autoload: true
});

suite.add('* insert', {
  defer: true,
  fn: function(deferred) {
    return nedb.insert({
      a: Math.random()
    }, function(err) {
      if (err) {
        return deferred.reject(err);
      }
      return deferred.resolve();
    });
  }
}).add('* query', {
  defer: true,
  fn: function(deferred) {
    return nedb.find({}).limit(Math.random() * 100).exec(function(err, docs) {
      if (err) {
        return deferred.reject(err);
      }
      return deferred.resolve();
    });
  }
}).on('cycle', function(e) {
  return console.log(e.target.toString());
}).on('complete', function(e) {
  var fs;
  fs = require('fs');
  return fs.unlink('nedb.db');
}).run();
