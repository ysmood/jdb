// Generated by CoffeeScript 1.9.3
var Benchmark, client, count, redis, suite;

Benchmark = require('benchmark');

suite = new Benchmark.Suite;

Benchmark.support.timeout = false;

redis = require('redis');

client = redis.createClient();

count = 0;

suite.add('* insert', {
  defer: true,
  fn: function(deferred) {
    return client.set(count++, Math.random(), function() {
      return deferred.resolve();
    });
  }
}).add('* query', {
  defer: true,
  fn: function(deferred) {
    return client.get(Math.floor(Math.random() * count), function(err, data) {
      return deferred.resolve();
    });
  }
}).on('cycle', function(e) {
  return console.log(e.target.toString());
}).on('complete', function(e) {
  return client.end();
}).run();
