// Generated by CoffeeScript 1.9.3
var Benchmark, MongoClient, suite;

Benchmark = require('benchmark');

suite = new Benchmark.Suite;

Benchmark.support.timeout = false;

MongoClient = require('mongodb').MongoClient;

MongoClient.connect('mongodb://127.0.0.1:27017/test', function(err, db) {
  var collection;
  collection = db.collection('test_db');
  return suite.add('* insert', {
    defer: true,
    fn: function(deferred) {
      return collection.insert({
        a: Math.random()
      }, function(err, docs) {
        return deferred.resolve();
      });
    }
  }).add('* query', {
    defer: true,
    fn: function(deferred) {
      return collection.find().limit(Math.random() * 100).toArray(function(err, docs) {
        return deferred.resolve();
      });
    }
  }).on('cycle', function(e) {
    return console.log(e.target.toString());
  }).on('complete', function(e) {
    return db.close();
  }).run();
});
